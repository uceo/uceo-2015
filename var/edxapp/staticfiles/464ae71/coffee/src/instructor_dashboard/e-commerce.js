// Generated by CoffeeScript 1.6.1

/*
E-Commerce Section
*/


(function() {
  var ECommerce;

  ECommerce = (function() {
    var isInt;

    function ECommerce($section) {
      var _this = this;
      this.$section = $section;
      this.$section.data('wrapper', this);
      this.$list_sale_csv_btn = this.$section.find("input[name='list-sale-csv']'");
      this.$list_order_sale_csv_btn = this.$section.find("input[name='list-order-sale-csv']'");
      this.$download_company_name = this.$section.find("input[name='download_company_name']'");
      this.$active_company_name = this.$section.find("input[name='active_company_name']'");
      this.$spent_company_name = this.$section.find('input[name="spent_company_name"]');
      this.$download_coupon_codes = this.$section.find('input[name="download-coupon-codes-csv"]');
      this.$download_registration_codes_form = this.$section.find("form#download_registration_codes");
      this.$active_registration_codes_form = this.$section.find("form#active_registration_codes");
      this.$spent_registration_codes_form = this.$section.find("form#spent_registration_codes");
      this.$error_msg = this.$section.find('#error-msg');
      this.$list_sale_csv_btn.click(function(e) {
        var url;
        url = _this.$list_sale_csv_btn.data('endpoint');
        url += '/csv';
        return location.href = url;
      });
      this.$list_order_sale_csv_btn.click(function(e) {
        var url;
        url = _this.$list_order_sale_csv_btn.data('endpoint');
        return location.href = url;
      });
      this.$download_coupon_codes.click(function(e) {
        var url;
        url = _this.$download_coupon_codes.data('endpoint');
        return location.href = url;
      });
      this.$download_registration_codes_form.submit(function(e) {
        _this.$error_msg.attr('style', 'display: none');
        return true;
      });
      this.$active_registration_codes_form.submit(function(e) {
        _this.$error_msg.attr('style', 'display: none');
        return true;
      });
      this.$spent_registration_codes_form.submit(function(e) {
        _this.$error_msg.attr('style', 'display: none');
        return true;
      });
    }

    ECommerce.prototype.onClickTitle = function() {
      return this.clear_display();
    };

    ECommerce.prototype.onClickTitle = function() {
      return this.clear_display();
    };

    ECommerce.prototype.onExit = function() {
      return this.clear_display();
    };

    ECommerce.prototype.clear_display = function() {
      this.$error_msg.attr('style', 'display: none');
      this.$download_company_name.val('');
      this.$active_company_name.val('');
      return this.$spent_company_name.val('');
    };

    isInt = function(n) {
      return n % 1 === 0;
    };

    return ECommerce;

  })();

  _.defaults(window, {
    InstructorDashboard: {}
  });

  _.defaults(window.InstructorDashboard, {
    sections: {}
  });

  _.defaults(window.InstructorDashboard.sections, {
    ECommerce: ECommerce
  });

}).call(this);
